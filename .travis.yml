language: java
os: linux
jdk:
  - openjdk8
branches:
  only:
    - develop
cache:
  directories:
    - "$HOME/.cache"
    - "$HOME/.m2"
notification:
  email:
    recipients:
      - yangkizhang@gmail.com
    on_success: false
    on_failure: always

env:
  global:
    - secure: d31f5mCaLRYAMDRO0a5sBQ61+uryGKxtFmB76sGs+YaGqS8qFbQccT88d2jKu+MjF7PWCZAIhQjotcZe3Iah5CeBsKToweANADJPiXU0pCuZDU5GrHVMtX5lFD+0lkzogTgSpvN7ipjwp9clApvEAGyhtMUeh4wnn1iBGSwDsAIGpmzUmH6IcNXfJ7nTvkJVBBpPymKuTBnSOc97/0/thTF2FmsyRQEXv7dFIvuzR/ns+9dwg2PukUZEM6GuMCIqhMddx8jby07gfdas0Bbmuz30RnnY5gJpxagACt2UyF8fBakkWKIp9i0XeOF5hl9LMOR7/WMGQtFQiJ1vjgz4H/rrK/FTCn6jbn02T6pru1wSym6WbPp3o7UmXC3OrmomufWJUg43vfvchaP62/rQ1/EaWwQBOyfst7Zk0lFUbGXfA6pc0gsJic7XDRrPSiXiK235c9VyZPk8olEanVuzrLjM7E/SxuuteovoFLddRNrn8Wcdom4E/JM+slYDhNmpm0uqUrLs81hyjezUBhhvJaea0euC3S+cRsi1/r5zRaQ2+igbNta8luuxguhm+cyRFLCvUEiZTOaUqfO0rAF4U319ejqavqHEMNEHbMF0c6J2hVp3fKI/v84uLOZhjzQqyotIU9VQH/MLy3qOQ/EY21Nt/Or+ofEFg/uWpCLzwZI=
    - secure: IQNPRxs4Jmsue0XPQqq9i6IqI4Bk8b02oAq4NiEhRRb1Lsba8ugHU/otxA7MtCllTLW/7Ohyz6ASpbJy+OWBBsW9ZdvugcqwlDJXKxpsaa8m7KoEFxjs7MrxOVL1qs/gMdg9xZo+M5LosmS/6hP/IACEo7YOewYTvwdPtBd6zBK3nQFUAKLL84TlW8+HXHKe4kZgDEXG5lqy2DBqMY3lnHm21q/mMPzfr8lSxU2Hw2iw4dzSu4U2DdDEt6kfCZfBTq6TARjzIaW/ZJwfjXxYaDlgrnrj77/3PZH9U+PYyrGTdt2ygdIkIZ+9kURChHVjyndiRjI5InODMHnUOUCv6jXvB7ZCtGos2y5+ocyds2iDrq71uqzECyW98sndahkB4/+aP0lYpMcMW8xMiz++8xpYdc8RpCHMJ2P10PbA/dRdHABgAZeX086nUTSYpOsQxddG0JusJKchwGB1Xs68tiuvieDJWPID3uTg5Mugc7jh85fxv7IFTOGzmWDC12t92qbj2jX7u2BjuK5Nk2pPMb5WTxENkMUDr1BGP5jB6xuazCYZe/KZ6/g+a2HzrN5IPNQOcJ0u91zenGEaJQ9m4Lu8pObVeHiic9bVOKv6EFb2LOMeLj2wnGzSzykip1JmLlk1WbwfkBipX82hT4bq3as2F5kZtsTtohSpe5XpyK0=
    - secure: O8o5E+IHAZzO2l8SVJQOBzz7vHjjp7q7Hv+9oaLQxw0fsaY/BBISiZnNd8HDQUDLHFCKa5TMqitil/URGiNS2YCW0UQY+YQJboodgBkv4GAvEfO2M01pRbBrI7yE7Ym0Lo4hJ6ryqkPtMsldZ1RIsYYmggDsMTLy1+NGVvm/U2Gfq1K5Z8Sh84LXU9wLrMrOxK84B6aKiGeRVPA6n6NjX9pm6Dk/9egJj7zZ7a3LB5mJ0Ifo997BvMPa7PCszVEwOF6E2wQW9mhE5hz9W8Ql6gR1jLXMa5CQJtt8vgWfEM3NWy96yjB2FdiXYNog/7hbaFP76godPtcb9cz9mb8N3lM+MDjUvXWYMncXeNtDutUq+sMW3yeqyBALlu18896gUzE6dm2URdP7At40Jhk5bQ2Yx2AjMgLe4JBqXbYO0rNZqNDarJWK8ZV1mozfvss7NkSupXQWe5rdCntj/AZFnuLHYaqV8iSR84qDNkakiGSyVCNUe9LsSy8mQhTlonF+uOPlHyOObSmSVtUb1iKXih3YmDK4aWAfxIJl6uv+MgeT4aT/YGngpg0PIFkpQY4jaC2YoI6A9/xJzlZnsJU5Lw4vxYNJNoZYRKMDhSI7wJ503e9tXtgUwP8fYMIODssJ034AYtRvboeE3eQMrRVtVys83mL+vcyDp8xk7BGKPbY=
install: ./mvnw -DskipTests -Dgpg.skip install
before_install:
  - cp .travis.settings.xml $HOME/.m2/settings.xml
  - openssl aes-256-cbc -K $encrypted_ca1e0dd2c873_key -iv $encrypted_ca1e0dd2c873_iv
    -in deployment/signingkey.asc.enc -out deployment/signingkey.asc -d
after_success:
  - gpg2 --keyring=$TRAVIS_BUILD_DIR/pubring.gpg --no-default-keyring --import deployment/signingkey.asc
  - gpg2 --allow-secret-key-import --keyring=$TRAVIS_BUILD_DIR/secring.gpg --no-default-keyring
    --import deployment/signingkey.asc
  - ./mvnw clean deploy -Dgpg.executable=gpg2 -Dgpg.passphrase=$PASSPHRASE -Dgpg.publicKeyring=$TRAVIS_BUILD_DIR/pubring.gpg -Dgpg.secretKeyring=$TRAVIS_BUILD_DIR/secring.gpg -Piooo-deploy
